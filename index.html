<!-- Внутри <script> в index.html обновите блок прослушивания Gun -->
<script>
    // Вставьте сюда MASTER_ID, который выдаст админка после Генезиса
    const ARCHITECT_PUB = "ВАШ_ПУБЛИЧНЫЙ_КЛЮЧ_ИЗ_АДМИНКИ"; 
    const gun = Gun(['gun-manhattan.herokuapp.com']);

    // Слушаем канал ShadowGrid
    gun.get('shadowgrid').get('signal').on(async (data) => {
        if (!data) return;

        try {
            // В 2026 Gun.SEA.verify проверяет структуру {msg, pub, sig}
            // Мы передаем данные и ожидаем, что они подписаны ARCHITECT_PUB
            const isVerified = await Gun.SEA.verify(data, ARCHITECT_PUB);

            if (isVerified) {
                // data.msg — это вложенный объект с magnet и ts
                const magnetLink = isVerified.magnet; 
                
                document.getElementById('status-text').innerText = "КАНАЛ ЗАЩИЩЕН: СИГНАЛ ПОДТВЕРЖДЕН";
                const btn = document.getElementById('dl-btn');
                btn.innerText = "СКАЧАТЬ АВТОНОМНЫЙ ХАБ (.EXE)";
                btn.disabled = false;
                btn.onclick = () => startP2P(magnetLink);
                
                console.log("Verified Magnet:", magnetLink);
            } else {
                document.getElementById('status-text').innerText = "ВНИМАНИЕ: НЕПОДТВЕРЖДЕННЫЙ СИГНАЛ";
            }
        } catch (e) {
            console.error("Криптографическая ошибка:", e);
        }
    });

    // ... остальной код (startP2P) без изменений
</script>
